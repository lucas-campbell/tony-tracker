<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" href="/stylesheets/style.css">
</head>
<body>
		<h1>Tony Macaroni</h1>
		<audio autoplay loop>
			<source src="dreamland.mp3">
		</audio>
		<div style="text-align:center;">
		<a href="foodtracker.html"><button class="button button1" >Food</button></a>
		
		<a href="danktracker.html"><button class="button button1"> Dank Animals</button></a>
		<button class="button button1" >Tony Macaroni</button>
		</div>

	<div id="tonymap">
		 <head>
		    <style>
    	   #map {
    	    height: 400px;
    	    width: 100%;
    	   }
    	</style>
  		</head>
  		<body>
  	  <h3>Tony Tracker</h3>
  	  <div id="map"></div>
  	  <script>
  	    function initMap() {
  	      var tufts = {lat:  42.407107, lng:-71.121395};
	      
	
	        var map = new google.maps.Map(document.getElementById('map'), {
	          zoom: 50,
	          center: tufts,
	          mapTypeId: 'satellite'
	        });
	        
	        var iconBase = 'https://maps.google.com/mapfiles/kml/shapes/';
	        var marker = new google.maps.Marker({
	          position: tufts,
	          map: map,
	          icon: iconBase
	        });
	
	        // click listener
	        map.addListener('click', function(e) {
	          placeMarkerAndPanTo(e.latLng, map);
	        });
	      }
	
	      function placeMarkerAndPanTo(latLng, map) {
	      	var sightings = [];
		var sightingJSON = {"markers":[]};
	        var marker = new google.maps.Marker({
	          position: latLng,
	          map: map,
	          icon: "tony_marker.png"
	        });
	        map.panTo(latLng);
		
	        sightings.push(latLng);

        	console.log(latLng.lat());
        	console.log(latLng.lng());
		var count = 0;
        	for (var i in sightings) {
		
        		alert(sightings[i]);
			sightingJSON.markers.push({"num":count,"lat":i.lat,"lng":i.lng});
    
     		}
		var myJSON = JSON.stringify(sightingJSON);
		fs.writeFile('sighting.JSON', myJSON, 'utf8', callback);
		fs.readFile('myjsonfile.json', 'utf8', function readFileCallback(err, data){
    		if (err){
      		  console.log(err);
   		 } else {
    		obj = JSON.parse(data); //now it an object
    		obj.table.push({id: 2, square:3}); //add some data
    		json = JSON.stringify(obj); //convert it back to json
    		fs.writeFile('myjsonfile.json', json, 'utf8', callback); // write it back 
}});
	      }
	    </script>
	    <script async defer
	    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCFBW3sdK2Jyp3IqwmDESjR3jAA4YCnPak&callback=initMap">
	    </script>
	  </body>
	  
	</br>
	</br>
	</div>
	<div  style="text-align:center;">
		<img src="where.jpg" width = "461" height = "278" alt = "Where?"> 
	</div>
	

<h6 style="text-align:center;">A Service Provided by your Friendly Fellow Jumbos</h6>
</body>
</html>
